#{extends 'menu.html' /}
#{set title:'Gestione Tariffe'/}

<h2>Gestione Tariffe</h2>
<div id="edit">
<ul>
	<li><label>Risorsa:</label> ${risorsa.matricola}</li>
	<li><label>Nome: </label>${risorsa.nome}</li> 
	<li><label>Cognome: </label>${risorsa.cognome}</li>
</ul>
</div>

#{if flash.success}
   	<p class="success">${flash.success}</p>
#{/if}
#{ifErrors}
   	<p class="error">
		${errors[0]}
	</p>
#{/ifErrors}
#{if paginator.size() > 0}
	
	<table class="table_tariffe">
	<thead>
		<tr>
			<th scope="col">Id Tariffa</th>
			<th scope="col">Data Inizio</th>
			<th scope="col">Data Fine</th>
			<th scope="col">Commessa</th>
			#{if !risorsa.dataOut}
				<th scope="col">Modifica</th>
				<th scope="col">Elimina</th>
			#{/if}
		</tr>
	</thead>
		#{paginate.list items:paginator, as:'tariffa'} 
		<tr>
			<td><a href="@{TariffeController.show(tariffa.idTariffa)}">${tariffa.idTariffa }</a></td>
			<td>${tariffa.dataInizio?.format('dd-MM-yyyy') }</td>
			<td>${tariffa.dataFine?.format('dd-MM-yyyy') }</td>
			<td>${tariffa.commessa.codice }</td>
			#{if risorsa.dataOut != null && tariffa.commessa.attivo}
				<td><a href="@{TariffeController.edit(tariffa.idTariffa)}"><img src="@{'/public/images/edit.gif'}" alt="modifica" /></a></td>
				<td><a href="@{TariffeController.delete(tariffa.idTariffa)}" onclick="return confirm('Continuare con la cancellazzione della tariffa ');"><img src="@{'/public/images/delete.gif'}" alt="elimina" /></a></td>
			#{/if}
			#{else}
			<td></td>
			<td></td>
			#{/else}
		</tr>
		#{/paginate.list} 
	</table>
	<div id="datatable_tariffe">
	#{paginate.controls items:paginator /}
	</div>
#{/if}
#{else}
	<center><h3>Nessuna Tariffa esistente</h3></center>
#{/else}

<div id="button_center">		
	#{if !risorsa.dataOut}
		<a id="create" href="@{TariffeController.create(risorsa.idRisorsa)}"><input type="button" class="submitbutton" value="Aggiungi"/></a>
	#{/if}
	
	#{form @RisorseController.list()}
		        <input type="submit" class="submitbutton" value="Indietro" />   
	#{/form}
</div>